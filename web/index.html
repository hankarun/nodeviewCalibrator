<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Node View Calibrator - Web</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="web-styles.css">
</head>
<body>  
  <div class="container">
    <div class="main-header">
      <h1 style="margin: 0;">Node View Calibrator <span class="web-badge">Web</span></h1>
      <div class="file-operations">
        <button id="newConfigBtn" title="Create new configuration">New</button>
        <button id="openConfigBtn" title="Open saved configuration">Open</button>
        <button id="saveConfigBtn" title="Save configuration">Save</button>
        <button id="saveAsConfigBtn" title="Save configuration as">Save As</button>
        <input type="file" id="fileInput" accept=".json" style="display: none;">
      </div>
    </div>
    
    <div class="main-layout">
      <!-- Left Column: Display List & Settings -->
      <div class="left-column">
        <div class="display-list-panel">
          <h2>Display List</h2>
          <div id="displayList" class="display-list">
            <div class="empty-list-message">No displays added yet</div>
          </div>
        </div>

        <div class="input-group">
          <h2>Display Settings</h2>
          <div class="input-row">
            <label for="presetSize">Preset Size:</label>
            <select id="presetSize">
              <option value="">Custom</option>
              <option value="27">27" (0.598 × 0.336m)</option>
              <option value="32">32" (0.708 × 0.398m)</option>
              <option value="40">40" (0.886 × 0.498m)</option>
              <option value="43">43" (0.952 × 0.535m)</option>
              <option value="50">50" (1.107 × 0.623m)</option>
              <option value="55">55" (1.218 × 0.685m)</option>
              <option value="65">65" (1.440 × 0.810m)</option>
              <option value="75">75" (1.660 × 0.934m)</option>
            </select>
          </div>
          <div class="input-row">
            <label for="displayWidth">Width (m):</label>
            <input type="number" id="displayWidth" value="0.5" step="0.01">
          </div>
          <div class="input-row">
            <label for="displayHeight">Height (m):</label>
            <input type="number" id="displayHeight" value="0.3" step="0.01">
          </div>
          <div class="input-row">
            <label for="displayDistance">Distance from eye (m):</label>
            <input type="number" id="displayDistance" value="0.7" step="0.01">
          </div>
          <div class="input-row">
            <label for="displayAngle">Yaw (degrees):</label>
            <input type="number" id="displayAngle" value="0" step="1">
          </div>
          <div class="input-row">
            <label for="displayPitch">Pitch (degrees):</label>
            <input type="number" id="displayPitch" value="0" step="1">
          </div>
          <div class="input-row">
            <label for="displayRoll">Roll (degrees):</label>
            <input type="number" id="displayRoll" value="0" step="1">
          </div>
          <div class="input-row">
            <label for="displayOffsetX">X position (m):</label>
            <input type="number" id="displayOffsetX" value="0" step="0.01">
          </div>
          <div class="input-row">
            <label for="displayOffsetY">Y position (m):</label>
            <input type="number" id="displayOffsetY" value="0" step="0.01">
          </div>
          <div class="input-row">
            <label for="displayOffsetZ">Z position (m):</label>
            <input type="number" id="displayOffsetZ" value="0.7" step="0.01">
          </div>
          <div class="input-row">
            <label for="showAsRectangles">Show displays as rectangles:</label>
            <input type="checkbox" id="showAsRectangles" checked>
          </div>
          <div class="input-row">
            <label for="stableEdgeCalculation">Stable edge calculation:</label>
            <input type="checkbox" id="stableEdgeCalculation" checked title="Use stable edge distance calculation that minimizes changes when moving rotated displays">
          </div>        
          <div class="button-row">
            <button id="addDisplayBtn">Add Display</button>
            <button id="updateDisplayBtn" disabled>Update Display</button>
            <button id="deleteDisplayBtn" disabled>Delete Display</button>
          </div>
        </div>
      </div>
      
      <!-- Middle Column: Canvas Views -->
      <div class="middle-column">
        
        <div class="canvas-container top-canvas">
          <h3>Top View</h3>
          <canvas id="topView" width="400" height="300"></canvas>
          <div class="canvas-controls">
            <button id="topViewZoomIn" class="zoom-button">+</button>
            <button id="topViewZoomOut" class="zoom-button">-</button>
            <button id="topViewReset" class="zoom-button">Reset</button>
          </div>
        </div>
        
        <div class="canvas-container left-canvas">
          <h3>Left View</h3>
          <canvas id="leftView" width="400" height="300"></canvas>
          <div class="canvas-controls">
            <button id="leftViewZoomIn" class="zoom-button">+</button>
            <button id="leftViewZoomOut" class="zoom-button">-</button>
            <button id="leftViewReset" class="zoom-button">Reset</button>
          </div>
        </div>
        
        <div class="canvas-container right-canvas">
          <h3>Front View</h3>
          <canvas id="frontView" width="400" height="300"></canvas>
          <div class="canvas-controls">
            <button id="frontViewZoomIn" class="zoom-button">+</button>
            <button id="frontViewZoomOut" class="zoom-button">-</button>
            <button id="frontViewReset" class="zoom-button">Reset</button>
          </div>
        </div>
      </div>
      
      <!-- Right Column: Corner Info -->
      <div class="right-column">
        <div class="corner-info-container">
          <h3>Display Corner Info</h3>
          <div id="projectionResults">
            <div>Calculated corners will appear here</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="module" src="web-renderer.js"></script>
</body>
</html>
