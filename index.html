<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Node View Calibrator</title>
  <meta http-equiv="Content-Security-Policy" content="script-src 'self';">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>Node View Calibrator</h1>
    <p>Calculate camera perspective offcenter corners based on display setup</p>
    
    <div class="file-operations">
      <button id="newConfigBtn" title="Create new configuration">New</button>
      <button id="openConfigBtn" title="Open saved configuration">Open</button>
      <button id="saveConfigBtn" title="Save configuration">Save</button>
      <button id="saveAsConfigBtn" title="Save configuration as">Save As</button>
    </div>
    
    <div class="control-panel">
      <div class="input-group">
        <h2>Display Settings</h2>
        <div class="input-row">
          <label for="presetSize">Preset Size:</label>
          <select id="presetSize">
            <option value="">Custom</option>
            <option value="27">27" (0.598 × 0.336m)</option>
            <option value="32">32" (0.708 × 0.398m)</option>
            <option value="40">40" (0.886 × 0.498m)</option>
            <option value="43">43" (0.952 × 0.535m)</option>
            <option value="50">50" (1.107 × 0.623m)</option>
            <option value="55">55" (1.218 × 0.685m)</option>
            <option value="65">65" (1.440 × 0.810m)</option>
            <option value="75">75" (1.660 × 0.934m)</option>
          </select>
        </div>
        <div class="input-row">
          <label for="displayWidth">Width (m):</label>
          <input type="number" id="displayWidth" value="0.5" step="0.01">
        </div>
        <div class="input-row">
          <label for="displayHeight">Height (m):</label>
          <input type="number" id="displayHeight" value="0.3" step="0.01">
        </div>
        <div class="input-row">
          <label for="displayDistance">Distance from eye (m):</label>
          <input type="number" id="displayDistance" value="0.7" step="0.01">
        </div>
        <div class="input-row">
          <label for="displayAngle">Yaw (degrees):</label>
          <input type="number" id="displayAngle" value="0" step="1">
        </div>
        <div class="input-row">
          <label for="displayPitch">Pitch (degrees):</label>
          <input type="number" id="displayPitch" value="0" step="1">
        </div>
        <div class="input-row">
          <label for="displayRoll">Roll (degrees):</label>
          <input type="number" id="displayRoll" value="0" step="1">
        </div>
        <div class="input-row">
          <label for="displayOffsetX">X position (m):</label>
          <input type="number" id="displayOffsetX" value="0" step="0.01">
        </div>
        <div class="input-row">
          <label for="displayOffsetY">Y position (m):</label>
          <input type="number" id="displayOffsetY" value="0" step="0.01">
        </div>
        <div class="input-row">
          <label for="displayOffsetZ">Z position (m):</label>
          <input type="number" id="displayOffsetZ" value="0.7" step="0.01">
        </div>
        <div class="input-row">
          <label for="showAsRectangles">Show displays as rectangles:</label>
          <input type="checkbox" id="showAsRectangles" checked>
        </div>
        <div class="button-row">
          <button id="calculateBtn">Calculate</button>
          <button id="addDisplayBtn">Add Display</button>
          <button id="updateDisplayBtn" disabled>Update Display</button>
        </div>
      </div>
      
      <div class="display-list-panel">
        <h2>Display List</h2>
        <div id="displayList" class="display-list">
          <div class="empty-list-message">No displays added yet</div>
        </div>
      </div>
      
      <div class="result-panel">
        <h2>Projection Corners</h2>
        <div id="projectionResults">
          <div>Calculated corners will appear here</div>
        </div>
      </div>
    </div>
    
    <div class="visualization">
      <div class="canvas-container">
        <h3>Top View</h3>
        <canvas id="topView" width="400" height="300"></canvas>
        <div class="canvas-controls">
          <button id="topViewZoomIn" class="zoom-button">+</button>
          <button id="topViewZoomOut" class="zoom-button">-</button>
          <button id="topViewReset" class="zoom-button">Reset</button>
        </div>
      </div>
      <div class="canvas-container">
        <h3>Left View</h3>
        <canvas id="leftView" width="400" height="300"></canvas>
        <div class="canvas-controls">
          <button id="leftViewZoomIn" class="zoom-button">+</button>
          <button id="leftViewZoomOut" class="zoom-button">-</button>
          <button id="leftViewReset" class="zoom-button">Reset</button>
        </div>
      </div>
      <div class="canvas-container">
        <h3>Front View</h3>
        <canvas id="frontView" width="400" height="300"></canvas>
        <div class="canvas-controls">
          <button id="frontViewZoomIn" class="zoom-button">+</button>
          <button id="frontViewZoomOut" class="zoom-button">-</button>
          <button id="frontViewReset" class="zoom-button">Reset</button>
        </div>
      </div>
    </div>
  </div>
  <script type="module" src="renderer.js"></script>
</body>
</html>